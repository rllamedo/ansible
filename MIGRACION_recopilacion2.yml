- name: MIGRACION - Recopilar datos con facts
  hosts: all
  tasks:
    - name: "Re-run setup to use custom facts"
      setup: ~
    - name: "Create custom fact directory"
      file:
        path: "{{ ansible_user_dir }}/facts.d"
        state: directory
    - name: Ejecutar sh
      shell: /home/altabox/pruebas/recopilar.sh
      register: recopilaDatos
    - debug:
        msg: "RESULTADO: {{ recopilaDatos.stdout }}"
    - debug:      
        msg: "split con ; {{  recopilaDatos.stdout.split(';') }}"
    - debug:
        msg: "split con : {{  recopilaDatos.stdout.split(':') }}"
        
    - name: Par Clave Valor
      set_fact: 
        keyvalue: "{{ item }}"
      with_items:
      - "{{ recopilaDatos.stdout.split(';') }}"
    
    - debug:
        msg: "Par Clave-Valor: {{ item }}"
      with_items:
        - "{{ keyvalue }}"
 
